# JSP 홈페이지 만들기 -3

**카테고리**: 수강 일지

**작성일**: Tue, 14 Oct 2025 17:43:29 +0900

**원문 링크**: https://junsseok.tistory.com/29

---

<p style="text-align: center;">게시판 리스트 정렬, 사진 첨부 기능 구현</p>
<hr contenteditable="false" />
<h3 style="text-align: center;">게시글 리스트 정렬</h3>
<p><figure class="imageblock alignCenter"><span><img height="292" src="https://blog.kakaocdn.net/dn/uPLPH/btsQ9WehM6Z/ubv52ckN8L9sJkOULr6iJ1/img.png" width="494" /></span></figure>
</p>
<p>게시글을 1,2,3,4,5 이렇게 게시글 5개씩 5칸을 나누어 볼 수 있게 하였다.</p>
<p>시작 페이지 1로 설정</p>
<p>&nbsp;</p>
<p style="color: #333333; text-align: start;">- 각 상황에 필요한 변수 선언</p>
<pre class="angelscript" id="code_1760431270567" style="background-color: #f8f8f8; color: #383a42; text-align: start;"><code>public class PageInfo {
	private int currentPage; // 지금 보여줄 페이지(사용자가 요청한 페이지)
	private int listCount; // 현재 총 게시글 수
	private int pageLimit; // 페이지 버튼을 몇 개 보여줄 것인가?
	private int boardLimit; // 한 페이지에 보여줄 게시글 수

	private int maxPage; // 전체 페이지 수(가장 마지막 페이지)
	private int startPage; // 페이지 버튼 시작 번호
	private int endPage; // 페이지 버튼 마지막 번호</code></pre>
<p style="color: #333333; text-align: start;">&nbsp;</p>
<p style="color: #333333; text-align: start;">- 전체 페이지 수 계산</p>
<pre class="cpp" id="code_1760431284776" style="background-color: #f8f8f8; color: #383a42; text-align: start;"><code>this.maxPage = (int)Math.ceil((double)this.listCount / this.boardLimit);</code></pre>
<p style="color: #333333; text-align: start;">&nbsp;</p>
<p style="color: #333333; text-align: start;">- 시작 페이지인 하단 페이지 버튼의 시작번호</p>
<pre class="kotlin" id="code_1760431296891" style="background-color: #f8f8f8; color: #383a42; text-align: start;"><code>this.startPage = ((this.currentPage - 1) / this.pageLimit) * this.pageLimit + 1;</code></pre>
<hr contenteditable="false" />
<p>&nbsp;</p>
<p><figure class="imageblock alignCenter"><span><img height="310" src="https://blog.kakaocdn.net/dn/ctbnbz/btsQ9RjKWuF/rh5kJrpC8bxdWcsz9QqZRk/img.png" width="469" /></span></figure>
</p>
<p>&nbsp;</p>
<p>게시글 개수대로 게시글 페이지 선택칸을 자동으로 바뀌게 만들었다.</p>
<p>&nbsp;</p>
<p>- 마지막 페이지인 하단 페이지 버튼의 마지막번호</p>
<pre class="bash" id="code_1760429514634"><code>this.endPage = this.startPage + this.pageLimit - 1;</code></pre>
<p>&nbsp;</p>
<p>- 실제 마지막 페이지 보다 크면 제한</p>
<pre class="bash" id="code_1760429615707"><code>this.endPage = this.endPage &gt; this.maxPage ? this.maxPage : this.endPage;</code></pre>
<hr contenteditable="false" />
<p>&nbsp;</p>
<h3 style="text-align: center;">사진 첨부 기능</h3>
<p>- 게시글 작성칸에 사진 첨부</p>
<p><figure class="imageblock alignCenter"><span><img height="512" src="https://blog.kakaocdn.net/dn/dSWgSz/btsQ98r1xCX/YJUByXuagQOl9Yu9TuC5z1/img.png" width="507" /></span></figure>
</p>
<p>&nbsp;</p>
<p>input type="file" 을 사용해서 파일을 첨부 가능하게 한다.</p>
<pre class="bash" id="code_1760430711001"><code>&lt;input type="file" name="upfile"&gt;</code></pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>- InsertController(글 작성 컨트롤러)에서&nbsp;</p>
<pre class="bash" id="code_1760431097752"><code>int fileMaxSize = 1024 * 1024 * 50; // 50MB
int requestMaxSize = 1024 * 1024 * 60; // 전체 요청 제한

String savePath = request.getServletContext().getRealPath("/resources/board-file/");</code></pre>
<p>-&gt; 파일 크기 지정 및 경로 지정</p>
<p>&nbsp;</p>
<pre class="bash" id="code_1760431125280"><code>DiskFileItemFactory factory = DiskFileItemFactory.builder().get();
JakartaServletFileUpload upload = new JakartaServletFileUpload(factory);
upload.setFileSizeMax(fileMaxSize);
upload.setSizeMax(requestMaxSize);</code></pre>
<p>-&gt; 업로드할 객체를 factory에 임시 저장 및 upload&nbsp;객체가&nbsp;실제로&nbsp;HTTP&nbsp;요청&nbsp;데이터를&nbsp;FileItem&nbsp;객체로&nbsp;파싱</p>
<p>&nbsp;</p>
<pre class="bash" id="code_1760431165552"><code>List&lt;FileItem&gt; formItems = upload.parseRequest(request);

Board b = new Board();
Attachment at = null;

Member loginMember = (Member)session.getAttribute("loginMember");
b.setBoardWriter(loginMember.getMemberNo());</code></pre>
<p>-&gt; 폼&nbsp;데이터&nbsp;+&nbsp;파일을&nbsp;모두&nbsp;formItems&nbsp;리스트로&nbsp;가져오고&nbsp;새&nbsp;게시글&nbsp;객체&nbsp;Board&nbsp;생성 <br />로그인한&nbsp;회원&nbsp;번호를&nbsp;게시글&nbsp;작성자로&nbsp;설정</p>
<p>&nbsp;</p>
<pre class="bash" id="code_1760431197552"><code>if(item.isFormField()) {
    switch(item.getFieldName()) {
        case "category": b.setCategoryNo(...); break;
        case "title": b.setBoardTitle(...); break;
        case "content": b.setBoardContent(...); break;
    }
}</code></pre>
<p>-&gt; 일반&nbsp;입력값&nbsp;(title,&nbsp;content,&nbsp;category)&nbsp;은&nbsp;UTF-8로&nbsp;변환&nbsp;후&nbsp;Board&nbsp;객체에&nbsp;세팅</p>
<p>&nbsp;</p>
<pre class="bash" id="code_1760431212560"><code>String originName = item.getName(); // 원래 파일명
if(originName.length() &gt; 0) {
    String tmpName = "kh_" + System.currentTimeMillis() + ((int)(Math.random()*100000)+1);
    String type = originName.substring(originName.lastIndexOf(".")); // 확장자
    String changeName = tmpName + type;
    
    File f = new File(savePath, changeName);
    item.write(f.toPath()); // 실제 업로드
    
    at = new Attachment();
    at.setOriginName(originName);
    at.setChangeName(changeName);
    at.setFilePath("resources/board-file/");
}</code></pre>
<p>-&gt; 파일명이&nbsp;겹치지&nbsp;않도록&nbsp;고유&nbsp;이름&nbsp;생성후&nbsp;서버에&nbsp;실제로&nbsp;저장&nbsp;(item.write()) <br />Attachment&nbsp;객체에&nbsp;원본명,&nbsp;변경명,&nbsp;경로&nbsp;세팅</p>
<p>&nbsp;</p>
<pre class="bash" id="code_1760431238399"><code>int result = new BoardService().insertBoard(b, at);</code></pre>
<p>-&gt; 이후 DB 저장</p>
<hr contenteditable="false" />
<p>- 글 작성 후 상세페이지</p>
<p><figure class="imageblock alignCenter"><span><img height="367" src="https://blog.kakaocdn.net/dn/bPsIgP/btsQ9XxxmO1/Bj0ADx47T1sp8MumQdzRC1/img.png" width="521" /></span></figure>
</p>
<p>&nbsp;</p>
<p>작성 후 첨부파일 이름을 클릭하면 사진이 다운받아진다.</p>
<p>&nbsp;</p>
<p>- 첨부파일이 없을 시 "첨부파일이 없습니다." 출력, 있을 시 파일 이름을 불러오고 첨부파일 이름을 클릭시 다운로드 되게 함</p>
<pre class="bash" id="code_1760430894152"><code>&lt;c:choose&gt;
	&lt;c:when test="${empty at}"&gt;
			첨부파일이 없습니다.
	&lt;/c:when&gt;
	&lt;c:otherwise&gt;
			&lt;a download="${at.originName}"
			href="${pageContext.request.contextPath}/${at.filePath}${at.changeName}"&gt;
			${at.originName}
			&lt;/a&gt;
	&lt;/c:otherwise&gt;
&lt;/c:choose&gt;</code></pre>
<hr contenteditable="false" />
<p style="text-align: center;">이후 상세 페이지 첨부파일 수정, 삭제 기능 구현 예정!!</p>
<hr contenteditable="false" />
<p style="text-align: center;">깃허브 주소 : <a href="https://github.com/20200961/JSP_Board_Project" rel="noopener&nbsp;noreferrer" target="_blank">https://github.com/20200961/JSP_Board_Project</a></p>