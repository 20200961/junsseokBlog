# DAY5

**작성일**: Wed, 30 Jul 2025 17:40:29 +0900

**원문 링크**: https://junsseok.tistory.com/4

---

<p><figure class="imageblock alignCenter"><span><img height="225" src="https://blog.kakaocdn.net/dn/cgOTXL/btsPB03Ki4X/E0kyvQUyEiiCSf0PbeIaHK/img.png" width="225" /></span></figure>
</p>
<p>CREATE&nbsp;USER&nbsp;및&nbsp;권한&nbsp;부여</p>
<pre class="bash" id="code_1753864618685"><code>CREATE USER C##KH IDENTIFIED BY KH;
GRANT CONNECT, RESOURCE TO C##KH;
ALTER USER C##KH DEFAULT TABLESPACE USERS QUOTA UNLIMITED ON USERS;</code></pre>
<p>&nbsp;</p>
<p>제약조건 실습</p>
<pre class="bash" id="code_1753864637516"><code>-- 복제 테이블 생성 및 제약조건 추가
CREATE TABLE EMPLOYEE_COPY AS (SELECT * FROM EMPLOYEE WHERE 1=0);
ALTER TABLE EMPLOYEE_COPY ADD PRIMARY KEY(EMP_ID);

-- 외래키 추가
ALTER TABLE EMPLOYEE ADD CONSTRAINT DEPT_FK FOREIGN KEY(DEPT_CODE) REFERENCES DEPARTMENT(DEPT_ID);</code></pre>
<p>&nbsp;</p>
<p>도서관리 시스템 테이블 생성 및 데이터 삽입</p>
<p>1. 출판사 테이블 TB_PUBLISHER</p>
<pre class="bash" id="code_1753864658445"><code>DROP TABLE TB_PUBLISHER CASCADE CONSTRAINTS;

CREATE TABLE TB_PUBLISHER (
    PUB_NO NUMBER CONSTRAINT PUBLISHER_PK PRIMARY KEY,       -- 출판사 번호
    PUB_NAME VARCHAR2(30) CONSTRAINT PUBLISHER_NN NOT NULL,  -- 출판사명
    PHONE VARCHAR2(13)                                        -- 전화번호
);

INSERT INTO TB_PUBLISHER VALUES (1, '출판사A', '010-1111-1111');
INSERT INTO TB_PUBLISHER VALUES (2, '출판사B', '010-2222-2222');
INSERT INTO TB_PUBLISHER VALUES (3, '출판사C', '010-3333-3333');</code></pre>
<p>&nbsp;</p>
<p>2. 도서 테이블 TB_BOOK</p>
<pre class="bash" id="code_1753864685005"><code>DROP TABLE TB_BOOK CASCADE CONSTRAINTS;

CREATE TABLE TB_BOOK (
    BK_NO NUMBER CONSTRAINT BOOK_PK PRIMARY KEY,                     -- 도서 번호
    BK_TITLE VARCHAR2(30) CONSTRAINT BOOK_NN_TITLE NOT NULL,         -- 도서명
    BK_AUTHOR VARCHAR2(20) CONSTRAINT BOOK_NN_AUTHOR NOT NULL,       -- 저자
    BK_PRICE NUMBER,                                                 -- 가격
    BK_PUB_NO NUMBER,
    CONSTRAINT BOOK_FK FOREIGN KEY (BK_PUB_NO)
        REFERENCES TB_PUBLISHER(PUB_NO) ON DELETE CASCADE            -- 출판사 삭제 시 도서도 삭제
);

INSERT INTO TB_BOOK VALUES (1, '도서A', '저자1', 15000, 1);
INSERT INTO TB_BOOK VALUES (2, '도서B', '저자2', 18000, 2);
INSERT INTO TB_BOOK VALUES (3, '도서C', '저자3', 20000, 3);
INSERT INTO TB_BOOK VALUES (4, '도서D', '저자4', 22000, NULL);
INSERT INTO TB_BOOK VALUES (5, '도서E', '저자5', 25000, NULL);</code></pre>
<p>&nbsp;</p>
<p>3. 회원 테이블 TB_MEMBER</p>
<pre class="bash" id="code_1753864697444"><code>DROP TABLE TB_MEMBER CASCADE CONSTRAINTS;

CREATE TABLE TB_MEMBER (
    MEMBER_NO NUMBER CONSTRAINT MEMBER_PK PRIMARY KEY,                       -- 회원번호
    MEMBER_ID VARCHAR2(20) CONSTRAINT MEMBER_UQ_ID UNIQUE,                   -- 아이디
    MEMBER_PWD VARCHAR2(20) CONSTRAINT MEMBER_NN_PWD NOT NULL,               -- 비밀번호
    MEMBER_NAME VARCHAR2(30) CONSTRAINT MEMBER_NN_NAME NOT NULL,             -- 이름
    GENDER CHAR(1) CONSTRAINT MEMBER_CK_GEN CHECK(GENDER IN ('M','F')),      -- 성별
    ADDRESS VARCHAR2(50),                                                    -- 주소
    PHONE VARCHAR2(13),                                                      -- 전화번호
    STATUS CHAR(1) DEFAULT 'N' CONSTRAINT MEMBER_CK_STA CHECK(STATUS IN ('N','Y')), -- 탈퇴여부
    ENROLL_DATE DATE DEFAULT SYSDATE CONSTRAINT MEMBER_NN_EN NOT NULL        -- 가입일
);

INSERT INTO TB_MEMBER VALUES (1, 'user01', 'pwd01', '홍길동', 'M', '서울', '010-1234-1234', DEFAULT, DEFAULT);
INSERT INTO TB_MEMBER VALUES (2, 'user02', 'pwd02', '김철수', 'M', '부산', '010-5678-5678', 'N', DEFAULT);
INSERT INTO TB_MEMBER VALUES (3, 'user03', 'pwd03', '이영희', 'F', '인천', '010-1111-2222', 'Y', DEFAULT);
INSERT INTO TB_MEMBER VALUES (4, 'user04', 'pwd04', '박민수', 'M', '대구', '010-3333-4444', 'Y', DEFAULT);
INSERT INTO TB_MEMBER VALUES (5, 'user05', 'pwd05', '최지우', 'F', '광주', '010-5555-6666', DEFAULT, DEFAULT);</code></pre>
<p>&nbsp;</p>
<p>4. 대여 테이블 TB_RENT</p>
<pre class="bash" id="code_1753864710028"><code>DROP TABLE TB_RENT CASCADE CONSTRAINTS;

CREATE TABLE TB_RENT (
    RENT_NO NUMBER CONSTRAINT RENT_PK PRIMARY KEY,                        -- 대여번호
    RENT_MEM_NO NUMBER,
    CONSTRAINT RENT_FK_MEM FOREIGN KEY (RENT_MEM_NO)
        REFERENCES TB_MEMBER(MEMBER_NO) ON DELETE SET NULL,              -- 회원 삭제 시 NULL
    RENT_BOOK_NO NUMBER,
    CONSTRAINT RENT_FK_BOOK FOREIGN KEY (RENT_BOOK_NO)
        REFERENCES TB_BOOK(BK_NO) ON DELETE SET NULL,                    -- 도서 삭제 시 NULL
    RENT_DATE DATE DEFAULT SYSDATE                                       -- 대여일
);

INSERT INTO TB_RENT VALUES (1, 1, 3, DEFAULT);
INSERT INTO TB_RENT VALUES (2, 2, 1, DEFAULT);
INSERT INTO TB_RENT VALUES (3, 3, NULL, DEFAULT);</code></pre>
<p>&nbsp;</p>
<p>5. 대여 목록 조회</p>
<pre class="bash" id="code_1753864729462"><code>SELECT 
    R.RENT_NO,
    R.RENT_MEM_NO,
    M.MEMBER_NAME,
    B.BK_TITLE
FROM TB_RENT R
LEFT JOIN TB_MEMBER M ON R.RENT_MEM_NO = M.MEMBER_NO
LEFT JOIN TB_BOOK B ON R.RENT_BOOK_NO = B.BK_NO;</code></pre>
<p>&nbsp;</p>
<p>배운점 &amp; 느낀점</p>
<p>오늘 실습을 통해관계형 데이터베이스에서 실제 서비스에 적용할 수 있는 구조와 조인, 제약조건, 데이터 입력 방식을 체계적으로 배웠다.</p>
<ul>
<li>ON DELETE CASCADE, ON DELETE SET NULL과 같은 관계 유지 방식을 직접 실습하며 이해할 수 있었다.</li>
<li>실무에서 필요한 연봉 계산, 보너스 포함 수령액, 만 나이 계산 등도 SQL로 정확히 처리 가능하다는 것을 체득했다.</li>
</ul>
<p>이러한 경험은 단순한 쿼리 실습을 프로젝트에 큰 도움이 될 것이다.</p>